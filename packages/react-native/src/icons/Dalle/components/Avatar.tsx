import React, { memo } from 'react';
import { Image, ImageStyle, View, ViewStyle } from 'react-native';

import { type RNIconAvatarProps } from '@/features';

import { AVATAR_BACKGROUND } from '../style';

export type AvatarProps = Omit<RNIconAvatarProps, 'Icon'>;

const Avatar = memo<AvatarProps>(({ size = 24, background, style, shape = 'circle', ...rest }) => {
  const borderRadius = shape === 'circle' ? size / 2 : Math.floor(size * 0.1);
  const containerStyle: ViewStyle = {
    alignItems: 'center',
    backgroundColor: background || AVATAR_BACKGROUND,
    borderRadius,
    height: size,
    justifyContent: 'center',
    overflow: 'hidden',
    width: size,
    ...style,
  };

  const imageStyle: ImageStyle = {
    height: '100%',
    width: '100%',
  };

  return (
    <View style={containerStyle} {...rest}>
      <Image
        resizeMode="contain"
        source={{
          uri: 'data:image/png;base64,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',
        }}
        style={imageStyle}
      />
    </View>
  );
});

Avatar.displayName = 'DalleAvatar';

export default Avatar;
